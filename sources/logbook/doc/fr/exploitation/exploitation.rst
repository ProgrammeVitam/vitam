Logbook Exploitation
#####################

Configuration du Logbook
-------------------------

**logbook.conf** : fichier Yaml de configuration du serveur *logbook*.  Celle-ci possède une propriété :

- **alertEvents** : configuration des alertes de sécurité

une alerte est déclenchée soit sur l'analyse du couple {evType,outCome} soit sur celle du {outDetail}

1. Dans le cas du déclenchement sur l'analyse du couple {evType, outCome}

.. sourcecode:: yaml

    - evType: 'CHECK_HEADER.CHECK_CONTRACT_INGEST'
      outcome: 'KO'

2. Dans le cas du déclenchement sur l'analyse du {outComeDetail}

.. sourcecode:: yaml

    - outDetail: 'CHECK_HEADER.CHECK_CONTRACT_INGEST.KO'

3. La liste des détections de l'alerte

- non conformité de la base des règles de gestion au référentiel enregistré (CHECK_RULES)
- refus d'entrée d'un SIP pour des raisons d'inadéquation de contrats (CHECK_HEADER.CHECK_CONTRACT_INGEST)
- soumission d'un SIP avec une classification incompatible avec la plateforme (CHECK_CLASSIFICATION_LEVEL)
- valeur de durée dans les régle de gestion inférieure à la durée minimum (CHECK_RULES.MAX_DURATION_EXCEEDS)
- refus d'un accès avec les droits personae (STP_PERSONAL_CERTIFICATE_CHECK)

- absence de sécurisation des journaux sur 12h (TODO)


Les fichiers de configuration sont gérés par les procédures d'installation ou de mise à niveau de l'environnement :term:`VITAM`. Se référer au :term:`DIN`.

Les fichiers de configuration sont définis sous ``/vitam/conf/logbook``.



Fichier ``logbook.conf``
-------------------------

.. literalinclude:: ../../../../../deployment/ansible-vitam/roles/vitam/templates/logbook/logbook.conf.j2
   :language: text

Fichier ``functional-administration-client.conf``
--------------------------------------------------

.. literalinclude:: ../../../../../deployment/ansible-vitam/roles/vitam/templates/logbook/functional-administration-client.conf.j2
   :language: text


Fichier ``logbook-client.conf``
--------------------------------------------------

.. literalinclude:: ../../../../../deployment/ansible-vitam/roles/vitam/templates/logbook/logbook-client.conf.j2
   :language: text

Fichier ``storage-client.conf``
--------------------------------------------------

.. literalinclude:: ../../../../../deployment/ansible-vitam/roles/vitam/templates/logbook/storage-client.conf.j2
   :language: text
