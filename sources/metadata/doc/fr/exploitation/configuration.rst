Configuration / fichiers utiles
###############################

Fichier ``metadata.conf``
-------------------------

.. literalinclude:: ../../../../../deployment/ansible-vitam/roles/vitam/templates/metadata/metadata.conf.j2
   :language: text

Paramétrage des caches
^^^^^^^^^^^^^^^^^^^^^^

Metadata maintient en mémoire un ensemble de caches pour la gestion des données peu modifiées et qui interviennent lors des
modifications de métadonnées (référentiels d'ontologie, schéma de donnée).

Cache du référentiel de l'ontologie :

* ``ontologyCacheMaxEntries``: Nombre maximum d'objets à maintenir dans le cache (par défaut 100). Ce paramètre dépend du nombre de traitements actifs.
* ``ontologyCacheTimeoutInSeconds``: Durée en secondes de rétention des objets en cache (par défaut 300, soit 5 minutes)

Cache du référentiel des profiles d'unités archivistiques :

* ``archiveUnitProfileCacheMaxEntries``: Nombre maximum d'objets à maintenir dans le cache (par défaut 100). Ce paramètre dépend du nombre de traitements actifs.
* ``archiveUnitProfileCacheTimeoutInSeconds``: Durée en secondes de rétention des objets en cache (par défaut 300, soit 5 minutes)

Cache des validateurs de schémas chargés en mémoire :

* ``schemaValidatorCacheMaxEntries``: Nombre maximum d'objets à maintenir dans le cache (par défaut 100). Ce paramètre dépend du nombre de traitements actifs.
* ``schemaValidatorCacheTimeoutInSeconds``: Durée en secondes de rétention des objets en cache (par défaut 300, soit 5 minutes)

Paramétrage des mappings externes elasticsearch
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

* ``elasticsearchExternalMetadataMappings``: La liste des collections et le chemin vers le fichier de mapping elasticsearch associé dans le dossier de configuration ``/vitam/conf/metadata/mapping``

la Liste ``elasticsearchExternalMetadataMappings`` est composée comme suit:

* ``collection``: La collection Unit en premier
* ``mappingFile``: Le chemin vers le fichier mapping de la collection, généralement dans le fichier de configuration du composant metadata.

* ``collection``: La collection ObjectGroup
* ``mappingFile``: Le chemin vers le fichier mapping de la collection, généralement dans le fichier de configuration du composant metadata.

.. warning:: ces mapping devront être en cohérence avec l'ontologie.


Fichier ``functional-administration-client.conf``
-------------------------------------------------

.. literalinclude:: ../../../../../deployment/ansible-vitam/roles/vitam/templates/metadata/functional-administration-client.conf.j2
   :language: text


Fichier ``storage-client.conf``
-------------------------------

.. literalinclude:: ../../../../../deployment/ansible-vitam/roles/vitam/templates/metadata/storage-client.conf.j2
   :language: text
