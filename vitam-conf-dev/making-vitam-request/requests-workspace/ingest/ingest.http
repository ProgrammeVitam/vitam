# Configuration
@access-contract = ContratTNR
@tenant = 0
@sip-size = 79267
@operation-id = aeeaaaaaacfww4l5absymaln3dj5jdaaaaaq

### Ajout de l'unité archivistique 'my-name.zip' qui est dans le fichier '/path/to/my-name.zip' a VITAM
POST {{url}}/ingest-external/v1/ingests
Accept: application/json
Content-Type: application/octet-stream
X-Action: RESUME
X-Chunk-Offset: 0
X-Context-Id: DEFAULT_WORKFLOW
X-Size-Total: {{sip-size}}
X-Tenant-Id: {{tenant}}

< /path/to/my-name.zip

### Vérification de la complétude de l'opération d'ingest en cours grâce au 'X-Request-Id' de la réponse de l'ingest
GET {{url}}/admin-external/v1/operations/{{operation-id}}
Accept: application/json
X-Tenant-Id: {{tenant}}
X-Access-Contract-Id: {{access-contract}}

### Récupération du résultat de l'opération d'ingest précédente grâce au 'X-Request-Id' de la réponse de l'ingest
GET {{url}}/access-external/v1/logbookoperations
Accept: application/json
Content-Type: application/json
X-Access-Contract-Id: {{access-contract}}
X-Tenant-Id: {{tenant}}

{
  "$query": {
    "$eq": {
      "#id": "{{operation-id}}"
    }
  },
  "$filter": {
    "$offset": 0,
    "$limit": 100
  },
  "$projection": {}
}

### Récupération de l'ATR de l'opération d'ingest précédente grâce au 'X-Request-Id' de la réponse de l'ingest
GET {{url}}/ingest-external/v1/ingests/{{operation-id}}/archivetransferreply
Accept: application/octet-stream
X-Access-Contract-Id: {{access-contract}}
X-Tenant-Id: {{tenant}}
