---
# Confirm launching this playbook
- hosts: all
  any_errors_fatal: yes
  gather_facts: no
  vars_prompt:
    name: "confirmation"
    prompt: "Are you sure you want to run this playbook? Answer with 'YES'"
    default: "NO"
    private: no

  tasks:
    - name: Check Confirmation
      fail: msg="Playbook run confirmation failed"
      when: confirmation|upper != "YES"


### HOSTS NETWORK VARS CHECK ###
- hosts: hosts
  roles:
    - checks

# Vitam apps stop
- import_playbook: stop_vitam_apps.yml

# stop admin tools (log management / consul / cerebro / ...)
- import_playbook: stop_vitam_admin.yml
