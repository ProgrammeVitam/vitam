---
# Confirm launching this playbook
- hosts: localhost
  any_errors_fatal: yes
  vars_prompt:
    name: "confirmation"
    prompt: "Are you sure you want to run this playbook? \n /!\\ WARNING : PLEASE KEEP IN MIND THIS PLAYBOOK WILL USE DISK SPACE ON LAST STORAGE ENGINE.\n Answer with 'YES' / 'NO'"
    default: "NO"
    private: no
  tasks:
    - name: Check Confirmation
      fail: msg="Playbook run confirmation failed"
      when: confirmation|upper != "YES"

- hosts: localhost
  any_errors_fatal: yes
  tasks:
    - name: "Check offer1"
      assert:
        that:
            - offer1 is defined and offer1 != ''

    - name: "Check offer2"
      assert:
        that:
            - offer2 is defined and offer2 != ''

    - name: "check data category"
      assert:
        that:
            - container is defined and container != ''

- hosts: hosts_storage_engine
  any_errors_fatal: yes
  roles:
    - diff_offers
  vars:
    vitam_struct: "{{ vitam.storageengine }}"
