---

- hosts: hosts_metadata_collect
  gather_facts: no
  any_errors_fatal: false
  roles:
    - { role: vitam_autotest, when: ( primary_site | lower == "true" ) or ( vitam_component in vitam_secondary_site_components ) }
  vars:
    vitam_component: "{{ vitam.metadata_collect.vitam_component }}"
    hote: "{{ ip_admin }}"
    hote_service: "{{ ip_service }}"
    check_port: "{{ vitam.metadata_collect.port_admin }}"
    check_port_service: "{{ vitam.metadata_collect.port_service }}"

- hosts: hosts_workspace_collect
  gather_facts: no
  any_errors_fatal: false
  roles:
    - { role: vitam_autotest, when: ( primary_site | lower == "true" ) or ( vitam_component in vitam_secondary_site_components ) }
  vars:
    vitam_component: "{{ vitam.workspace_collect.vitam_component }}"
    hote: "{{ ip_admin }}"
    hote_service: "{{ ip_service }}"
    check_port: "{{ vitam.workspace_collect.port_admin }}"
    check_port_service: "{{ vitam.workspace_collect.port_service }}"

- hosts: hosts_collect
  gather_facts: no
  any_errors_fatal: false
  roles:
    - { role: vitam_autotest, when: ( primary_site | lower == "true" ) or ( vitam_component in vitam_secondary_site_components ) }
  vars:
    vitam_component: "{{ vitam.collect.vitam_component }}"
    hote: "{{ ip_admin }}"
    hote_service: "{{ ip_service }}"
    check_port: "{{ vitam.collect.port_admin }}"
    check_port_service: "{{ vitam.collect.port_service }}"
