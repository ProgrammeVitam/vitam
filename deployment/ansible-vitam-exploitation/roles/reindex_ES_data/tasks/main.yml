---

- name: Ensure service is started
  service:
    name: vitam-functional-administration
    state: started

- name: "Wait until service functional-admin is up"
  wait_for:
      host: "{{ hostvars[groups['hosts_functional_administration'][0]]['ip_admin'] }}"
      port: "{{ vitam.functional_administration.port_admin }}"
      state: "started"
      timeout: "{{ vitam_defaults.services.start_timeout }}"
  run_once: true

# -----
## By tenant collections
# -----

# unit
- import_tasks: "unit.yml"
  tags: [unit]

# logbookoperation
- import_tasks: "logbookoperation.yml"
  tags: [logbook]

# objectgroup
- import_tasks: "objectgroup.yml"
  tags: [objectgroup]

# -----
## Multi tenant collections
# -----

# securityprofile
- import_tasks: "securityprofile.yml"
  tags: [securityprofile]

# context
- import_tasks: "context.yml"
  tags: [context]

# ontology
- import_tasks: "ontology.yml"
  tags: [ontology]

# ingestcontract
- import_tasks: "ingestcontract.yml"
  tags: [ingestcontract]

# agencies
- import_tasks: "agencies.yml"
  tags: [agencies]

# accessionregisterdetail
- import_tasks: "accessionregisterdetail.yml"
  tags: [accessionregisterdetail]

# archiveunitprofile
- import_tasks: "archiveunitprofile.yml"
  tags: [archiveunitprofile]

# accessionregistersummary
- import_tasks: "accessionregistersummary.yml"
  tags: [accessionregistersummary]

# accesscontract
- import_tasks: "accesscontract.yml"
  tags: [accesscontract]

# managementcontract
- import_tasks: "managementcontract.yml"
  tags: [managementcontract]

# fileformat
- import_tasks: "fileformat.yml"
  tags: [fileformat]

# filerules
- import_tasks: "filerules.yml"
  tags: [filerules]

# profile
- import_tasks: "profile.yml"
  tags: [profile]

# accessionregistersymbolic
- import_tasks: "accessionregistersymbolic.yml"
  tags: [accessionregistersymbolic]

# griffin
- import_tasks: "griffin.yml"
  tags: [griffin]

# preservationscenario
- import_tasks: "preservationscenario.yml"
  tags: [preservationscenario]
