---

- set_fact:
    jmespath_pkg: "python2-jmespath"
  when: ansible_os_family == "RedHat" and ansible_distribution != "AlmaLinux"

- set_fact:
    jmespath_pkg: "python-jmespath"
  when: ansible_os_family == "Debian" and ansible_distribution_version == "10"

- set_fact:
    jmespath_pkg: "python3-jmespath"
  when: ansible_os_family == "Debian" and ansible_distribution_version == "11"

- set_fact:
    jmespath_pkg: "python3-jmespath"
  when: ansible_distribution == "AlmaLinux"

- name: install jmespath for json query
  package:
    name: "{{ jmespath_pkg }}"
    state: present
