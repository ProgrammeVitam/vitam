{
  "$schema": "http://json-schema.org/draft-04/schema",
  "definitions": {
    "one-one": {
      "type": "array",
      "minItems": 1,
      "maxItems": 1
    },
    "one-many": {
      "type": "array",
      "minItems": 1
    },
    "closed-object": {
      "type": "object",
      "additionalProperties": false
    },
    "simple-date": {
      "type": "string",
      "pattern": "[0-9]{4}-[0-9]{2}-[0-9]{2}"
    }
  },
  "type": "object",
  "patternProperties": {
    "#management": {
    }
  },
  "additionalProperties": false,
  "required": [
    "Title",
    "Keyword",
    "RegisteredAgent"
  ],
  "properties": {
    "DescriptionLevel": {
      "enum": [
        "Item"
      ]
    },
    "Title": {
      "type": "string"
    },
    "ArchivalAgencyArchiveUnitIdentifier": {},
    "Keyword": {
      "type": "array",
      "items": {
        "anyOf": [
          {
            "enum": [
              {
                "KeywordContent": "Guerre 1914-1918",
                "KeywordType": "subject"
              }
            ]
          },
          {
            "type": "object",
            "properties": {
              "KeywordContent": {},
              "KeywordType": {
                "enum": [
                  "persname"
                ]
              }
            }
          },
          {
            "type": "object",
            "properties": {
              "KeywordContent": {
                "pattern": "\\([0-9]+\\)"
              },
              "KeywordType": {
                "enum": [
                  "geogname"
                ]
              }
            }
          }
        ]
      }
    },
    "StartDate": {
      "description": "Similar to simple-date",
      "pattern": "\\d\\d\\d\\d-\\d\\d-\\d\\d"
    },
    "EndDate": {
      "pattern": "[0-9]{4}-[0-9][0-9]-[0-9]{2}"
    },
    "RegisteredAgent": {
      "$ref": "#/definitions/one-one",
      "items": {
        "$ref": "#/definitions/closed-object",
        "required": [
          "FirstName",
          "FullName",
          "BirthName",
          "BirthDate",
          "DeathDate",
          "Position"
        ],
        "properties": {
          "FirstName": {
            "description": "C'est une string comme indiqué dans l'ontologie. Inutile de le redire ici",
            "$ref": "#/definitions/one-one"
          },
          "FullName": {
            "$ref": "#/definitions/one-one"
          },
          "BirthName": {
            "$ref": "#/definitions/one-one"
          },
          "BirthDate": {
            "$ref": "#/definitions/one-one",
            "items": {
              "$ref": "#/definitions/simple-date"
            }
          },
          "DeathDate": {
            "$ref": "#/definitions/one-one",
            "items": {
              "$ref": "#/definitions/simple-date"
            }
          },
          "Position": {
            "description": "Plusieurs positions sont possible ! Nécessairement des string contenant des chiffres",
            "$ref": "#/definitions/one-many",
            "items": {
              "pattern": "^[0-9]+$"
            }
          },
          "BirthPlace": {
            "$ref": "#/definitions/one-one",
            "items": {
              "$ref": "#/definitions/closed-object",
              "required": [
                "Geogname",
                "Region",
                "City"
              ],
              "properties": {
                "Geogname": {
                  "$ref": "#/definitions/one-one"
                },
                "Region": {
                  "$ref": "#/definitions/one-one",
                  "items": {
                    "description": "Les noms de régions doivent être : n°dept - nom",
                    "pattern": "^[0-9][0-9] - .*$"
                  }
                },
                "City": {
                  "$ref": "#/definitions/one-one"
                }
              }
            }
          },
          "DeathPlace": {
            "description": "Similar to BirthPlace",
            "$ref": "#/properties/RegisteredAgent/items/properties/BirthPlace"
          }
        }
      }
    }
  }
}