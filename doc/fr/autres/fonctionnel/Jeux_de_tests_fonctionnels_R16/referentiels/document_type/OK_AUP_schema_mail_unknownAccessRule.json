{
    "$schema": "http://json-schema.org/draft-04/schema",
    "type": "object",
    "additionalProperties": false,
    "required": [
        "ArchiveUnitProfile",
        "#management",
        "DescriptionLevel",
        "Title",
        "OriginatingSystemId",
        "Description",
        "Writer",
        "Addressee",
        "SentDate",
        "ReceivedDate"
    ],
    "properties": {
        "ArchiveUnitProfile": {
            "type": "string"
        },
        "#management": {
            "additionalProperties": false,
            "properties": {
                "AppraisalRule": {
                    "type":"object",
                    "description": "AppraisalRule : cardinalité 1-1 / contient obligatoirement Rule, StartDate, FinalAction",
                    "additionalProperties": false,
                    "properties": {
                        "Rules": {
                            "type": "array",
                            "maxItems": 1,
                            "items": {
                                "properties": {
                                    "Rule": {
                                        "description": "Rule : cardinalité 1-1 / valeur = APP-0001",
                                        "enum": [
                                            "APP-00001"
                                        ]
                                    },
                                    "StartDate": {
                                        "description": "StartDate : cardinalité 1-1 / valeur date libre"
                                    },
                                    "EndDate": {
                                        "description": "EndDate : cardinalité 0-1 / valeur calculée par Vitam"
                                    }
                                },
                                "additionalProperties": false,
                                "required": [
                                    "Rule",
                                    "StartDate"
                                ]
                            }
                        },
                        "FinalAction": {
                            "description": "FinalAction : cardinalité 1-1 / valeur = Keep",
                            "enum": [
                                "Keep"
                            ]
                        }
                    },
                    "required": [
                        "FinalAction"
                    ]
                },
                "StorageRule": {
                    "description": "AppraisalRule : cardinalité 0-1 / contient obligatoirement FinalAction",
                    "additionalProperties": false,
                    "properties": {
                        "Rules": {
                            "items": {
                                "properties": {
                                    "Rule": {
                                        "description": "Rule : cardinalité 0-1 / valeur = APP-0001",
                                        "enum": [
                                            "APP-00001"
                                        ]
                                    },
                                    "StartDate": {
                                        "description": "StartDate : cardinalité 0-1 / valeur date libre"
                                    },
                                    "EndDate": {
                                        "description": "EndDate : cardinalité 0-1 / valeur calculée par Vitam"
                                    }
                                },
                                "additionalProperties": false
                            }
                        },
                        "FinalAction": {
                            "description": "FinalAction : cardinalité 1-1 / valeur au choix",
                            "enum": [
                                "RestrictAccess",
                                "Copy",
                                "Transfer"
                            ]
                        }
                    },
                    "required": [
                        "FinalAction"
                    ]
                },
                "AccessRule": {
                    "additionalProperties": false,
                    "properties": {
                        "Rules": {
                            "items": {
                                "additionalProperties": false,
                                "properties": {
                                    "Rule": {
                                        "description": "Rule : cardinalité 0-1 / valeur = ACC-00001",
                                        "enum": [
                                            "PIY2"
                                        ]
                                    },
                                    "StartDate": {
                                        "description": "StartDate : cardinalité 0-1 / valeur date libre"
                                    },
                                    "EndDate": {
                                        "description": "EndDate : cardinalité 0-1 / valeur calculée par Vitam"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "required": [
                "AppraisalRule",
                "AccessRule"
            ]
        },
        "DescriptionLevel": {
            "description": "DescriptionLevel : cardinalité 1-1 / valeur = Item",
            "enum": [
                "Item"
            ]
        },
        "Title": {
            "description": "Title : cardinalité 1-1 / valeur libre",
            
            "type": "string"
        },
        "OriginatingSystemId": {
            "description": "OriginatingSystemId : cardinalité 1-1 / valeur libre",
            "maxItems": 1,
            "minItems": 1
        },
        "Description": {
            "description": "Description (si = 1) : cardinalité 1-0 / valeur libre",
            "type": "string"
        },
		 "Tag": {
            "description": "Tag : cardinalité 0-n / valeur libre",
            "type": "array",
			"maxItems": 1
        },
		
        "Writer": {
            "description": "Writer : cardinalité 1-1 / contient obligatoirement BirthName, FirstName et Identifier",
            "type": "array",
            "items": {
                "additionalProperties": false,
                "required": [
                    "BirthName",
                    "FirstName",
                    "Identifier"
                ],    
                "properties": {
                    "FirstName": {
                        "description": "FirstName : cardinalité 1-1 / valeur libre",
                        "type": "string"
                    },
                    "BirthName": {
                        "description": "BirthName : cardinalité 1-1 / valeur libre",
                        "type": "string"
                    },
                    "Identifier": {
                        "description": "Identifier : cardinalité 1-1 / valeur libre",
                        "type": "array",
                        "maxItems": 1,
                        "minItems": 1
                    }
                }
            },
            "maxItems": 1,
            "minItems": 1
        },
        "Addressee": {
            "description": "Adresse : cardinalité 1-n / contient obligatoirement BirthName, FirstName et Identifier",
            "items":  {
                "additionalProperties": false,
                "required": [
                    "BirthName",
                    "FirstName",
                    "Identifier"
                ],    
                "properties": {
                    "FirstName": {
                        "description": "FirstName : cardinalité 1-1 / valeur libre",
                        "type": "string"
                    },
                    "BirthName": {
                        "description": "BirthName : cardinalité 1-1 / valeur libre",
                        "type": "string"
                    },
                    "Identifier": {
                        "description": "Identifier : cardinalité 1-1 / valeur libre",
                        "type": "array",
                        "maxItems": 1,
                        "minItems": 1
                    }
                }
            },
            "minItems": 1
        },
        "StartDate": {
            "description": "StartDate : cardinalité 0-1 / valeur date libre"
        },
        "EndDate": {
            "description": "EndDate : cardinalité 0-1 / valeur date libre"
        },
        "SentDate": {
            "description": "SentDate : cardinalité 1-1 / valeur date libre"
        },
        "ReceivedDate": {
            "description": "ReceivedDate : cardinalité 1-1 / valeur date libre"
        }
    }
}