.. _confcommon:

Fichiers communs
==================


Les composants de la solution logicielle :term:`VITAM` utilisent un socle de fichiers communs.

Fichier ``/vitam/conf/<composant>/sysconfig/java_opts``
-------------------------------------------------------

Ce fichier définit les JVMARGS.

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/java_opts.j2
   :language: text
   :linenos:

Fichier ``/vitam/conf/<composant>/logback-access.xml``
-------------------------------------------------------

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/logback-access.xml.j2
   :language: xml
   :linenos:

Fichier ``/vitam/conf/<composant>/logback.xml``
------------------------------------------------------

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/logback.xml.j2
   :language: xml
   :linenos:


Fichier ``/vitam/conf/<composant>/jetty-config.xml``
----------------------------------------------------

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/jetty-config.xml.j2
   :language: xml
   :linenos:


Fichier ``/vitam/conf/<composant>/logbook-client.conf``
--------------------------------------------------------

Ce fichier permet de configurer l'appel au composant logbook.

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/logbook-client.conf.j2
   :language: text
   :linenos:

Fichier ``/vitam/conf/<composant>/server-identity.conf``
----------------------------------------------------------

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/server-identity.conf.j2
   :language: text
   :linenos:

Fichier ``/vitam/conf/<composant>/antisamy-esapi.xml``
----------------------------------------------------------

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/antisamy-esapi.xml.j2
   :language: xml
   :linenos:

Fichier ``/vitam/conf/<composant>/vitam.conf``
----------------------------------------------------------

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/vitam.conf.j2
   :language: text
   :linenos:

Ce fichier permet de définir les variables d'environnement vitam.

- `binarySizePlatformThreshold` est le seuil de plate-forme du poids binaire max autorisé pour un DIP.
    elle comporte deux clés :
        limit : le seuil
        sizeUnit : l'unité de taille (GIGABYTE / MEGABYTE / KILOBYTE / BYTE)
    par défaut le seuil est 1 Go.
    exemple :

    .. code-block:: yaml

        binarySizePlatformThreshold:
            limit: 1
            sizeUnit: GIGABYTE / MEGABYTE / KILOBYTE / BYTE


- `binarySizeTenantThreshold` est une liste qui constitue l'ensemble des seuils du poids binaire max autorisé pour un DIP par tenant.
    Cette liste comporte 4 clés :
        tenant : le tenant
        limit : le seuil
        sizeUnit : l'unité de taille (GIGABYTE / MEGABYTE / KILOBYTE / BYTE)
        authorise : true si l'utilisateur peut excéder le seuil prédéfini.

    exemple :

    .. code-block:: yaml

        binarySizeTenantThreshold:
           - tenant: 0
              limit: 20
              sizeUnit: MEGABYTE
              authorize: false
           - tenant: 1
              limit: 100
              sizeUnit: MEGABYTE
              authorize: true


Fichier ``/vitam/conf/<composant>/java.security``
----------------------------------------------------------

.. literalinclude:: ../../../../deployment/ansible-vitam/roles/vitam/templates/java.security.j2
   :language: ini
   :linenos:
