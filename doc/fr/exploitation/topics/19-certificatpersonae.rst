Certificats personae
###############################


Configuration des permissions des certificats personae
======================================================

il est possible de configurer les endpoints nécessitant une authentification personae via le fichier `deployment/ansible-vitam/roles/vitam/templates/security-internal/personal-certificate-permissions.conf.j2`
Les endpoints qui requièrent une authentification personnelle doivent être déplacés de **permissionsWithoutPersonalCertificate** vers **permissionsRequiringPersonalCertificate**

Exemple :

.. code-block:: yaml

    permissionsRequiringPersonalCertificate:
      - 'elimination:action'

    permissionsWithoutPersonalCertificate:
      - 'dipexport:create'
      - 'dipexportv2:create'
      - 'dipexport:id:dip:read'


Déploiement des certificats personae
====================================

Vitam n'est pas encore déployé
------------------------------

Déployer Vitam en suivant la procédure indiquée dans le :term:`DIN`.

.. note:: le certificat personnel doit être pré-provisionné dans Vitam, Ceci est réalise au moment de l'installation via le paramètre admin_personal_certs du fichier de configuration {{ inventory_dir }}/group_vars/all/advanced/vitam_security.yml, et en renseignant les certificats (clés publiques) dans le bon dossier {{ inventory_dir }}/certs/client-vitam-users/clients.

Vitam est déjà déployé
----------------------

Suivre la procédure de la section :ref:`integration_certificats_SIA_Personae`.
