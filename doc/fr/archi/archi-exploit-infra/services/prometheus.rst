Prometheus server
#################

Supervision des événements et des alertes

Type :
  COTS EXTRA

Données stockées :
  * Métriques techniques
  * Métriques métier


Architecture de déploiement
===========================

Veuillez vous référer à la documentation officielle.


Ports utilisés
--------------

Le port utilisé par le serveur prometheus est le suivant:

* ``tcp:9090`` : Port d'écoute modifiable via la variable ``prometheus.server.port`` dans le fichier ``environments/group_vars/all/advanced/cots_vars.yml``.


Prometheus alertmanager
########################

Envoi des alertes.


Type :
  COTS EXTRA


Architecture de déploiement
===========================
Veuillez vous référer à la documentation officielle.


Ports utilisés
--------------

Les ports utilisés par Prometheus alertmanager sont les suivants :

* ``tcp:9093`` : Port d'API modifiable via la variable ``prometheus.alertmanager.api_port`` dans le fichier ``environments/group_vars/all/advanced/cots_vars.yml``
* ``tcp:9094`` : Port de cluster modifiable via la variable ``prometheus.alertmanager.cluster_port`` dans le fichier ``environments/group_vars/all/advanced/cots_vars.yml``


Prometheus node_exporter
########################

Exposition des métriques liées au matériel et au noyau du système.


Type :
  COTS


Architecture de déploiement
===========================

Ce composant est à installer sur chacune des VMs ou matériels à superviser.

Ports utilisés
--------------

Le port utilisé par Prometheus node_exporter est le suivant:

* ``tcp:9101`` : Port d'écoute modifiable via la variable ``prometheus.node_exporter.port`` dans le fichier ``environments/group_vars/all/advanced/cots_vars.yml``

API exposées
-------------

Prometheus node_exporter expose l'API suivant:

* ``/metrics`` : API sur laquelle les métriques sont exposées.

Prometheus Elasticsearch Exporter
#################################

Exposition des métriques liées à Elasticsearch.


Type :
  COTS


Architecture de déploiement
===========================

Ce composant est à installer sur chacune des VMs où des services Elasticsearch sont à superviser.


Ports utilisés
--------------

Le port utilisé par Prometheus Elasticsearch Exporter est le suivant:

* ``tcp:9114`` : Port d'écoute modifiable via la variable ``prometheus.node_exporter.port`` dans le fichier ``environments/group_vars/all/advanced/cots_vars.yml``

API exposées
-------------

Prometheus Elasticsearch Exporter expose l'API suivant:

* ``/metrics`` : API sur laquelle les métriques sont exposées.
