restic
######

Outil de sauvegarde opensource. Supporte les différent type d'offre de stockage de Vitam (filesystem, Swift et S3).

Type :
  COTS EXTRA

Données stockées :
  * Sauvegarde des bases mongodb.


Architecture de déploiement
===========================

restic sera déployé sur l'ensemble des machines renseignées dans le groupe ``[hosts_storage_offer_default]`` de votre fichier d'inventaire qui possèdent le paramètre ``restic_enabled=true``.

Afin de permettre aux machines du groupe ``[hosts_storage_offer_default]`` de faire les backups, elles doivent pouvoir accéder aux bases de données afin de pouvoir effectuer la commande `mongodump`. Ainsi, les flux réseaux doivent permettre d'atteindre les bases configurées (``{{ restic.backup.host }}``).

Pour des raisons de sécurité, restic est déployé sur ces machines afin d'éviter de diffuser les paramètres d'accès aux offres de stockage (notamment dans le cas des offres objet).

De plus, en cas de défaillance critique du système Vitam, tant que les offres de stockage sont intactes, il sera plus facile de ressortir les snapshots des bases de données associées aux données de l'offre sous-jacente.
