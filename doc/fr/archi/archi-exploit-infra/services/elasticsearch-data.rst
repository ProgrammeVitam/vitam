Elasticsearch-data
##################

Cluster d'indexation dédié aux données métier.


Type :
  COTS

Données stockées :
  * Index de recherche des données d'archive

Typologie de consommation de ressources :
  * CPU : forte
  * Mémoire : forte
  * Réseau : forte
  * Disque : forte


Architecture de déploiement
===========================

.. TODO Rajouter une présentation de l'architecture de déploiement (avec le rôle des différents noeuds), ainsi que des principes de LB/HA d'elasticsearch sera incluse dans une prochaine version de ce document.

Dans le paramétrage par défaut du déploiement, tous les noeuds sont considérés comme des noeuds "master" et "data" ; par conséquent, le nombre de noeuds du cluster doit être impair (i.e. 2n + 1 noeuds, n > 0).

2 types de clients sont utilisés dans VITAM :

* les clients "transports" : ils sont utilisés par les composants développés dans le cadre de la solution logicielle (notamment les composants metadata, functional-administration, logbook). Ils sont considérés par le cluster elasticsearch comme membres du cluster, de type "client" ;
* les clients "http" : ils sont utilisés par les composants d'administration (cerebro, curator).

Monitoring
==========

Le monitoring d'elasticsearch est possible :

* soit à partir des API http (notamment les `'cat APIs' <https://www.elastic.co/guide/en/elasticsearch/reference/5.6/cat.html>`_, les `API de gestion des index <https://www.elastic.co/guide/en/elasticsearch/reference/5.6/indices.html>`_ ou les `API de gestion du cluster <https://www.elastic.co/guide/en/elasticsearch/reference/5.6/cluster.html>`_ ) ;
* soit en utilisant le composant Cerebro (Cf. `la page officielle <https://github.com/lmenezes/cerebro>`_) installé dans le cadre de la solution logicielle VITAM.

