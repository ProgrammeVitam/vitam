Guidelines de déploiement
#########################

Les principes de *zoning* associés à l'architecture de la solution logicielle :term:`VITAM` ont été présentés :doc:`lors de la description des principes de déploiement <principes/30-principles-deployment>` ; cette section a pour but de compléter ces principes par des recommandations concernant la colocalisation des composants.

De manière générale, pour des raisons de sécurité, il est déconseillé de colocaliser des composants appartenant à des zones différentes. Il est par contre possible de colocaliser des composants appartenant à des sous-zones différentes dans la zone des services internes ; ainsi, les colocalisations des composants suivants sont relativement pertinentes :

* ingest-external, access-external et administration-external, hors contraintes particulières de sécurité ;
* ingest-internal et access-internal ;
* elasticsearch-data et mongod ;
* mongos et mongoc ;
* logstash, elasticsearch-log (mono-instance), kibana (pour les déploiements de tests) ; elasticsearch-log et consul (serveur) (pour des déploiements de taille moyenne)
* workspace et storage ;
* prometheus server, prometheus alertmanager, grafana

.. caution::

  Il est recommandé de ne pas colocaliser les composants restants :

  * storage-offer-default, étant dans une zone logique particulière ;
  * worker, ayant une consommation de ressources système potentiellement importante.
